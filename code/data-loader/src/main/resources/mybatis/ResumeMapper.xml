<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.lu.cuet.data.loader.mapper.ResumeMapper">
    <resultMap id="ResumeResult" type="cn.lu.cuet.data.loader.model.Resume" >
        <id property="id" column="id" />
        <result property="createTime" column="create_time" />
        <result property="updateTime" column="update_time" />
        <result property="deleted" column="deleted" />
        <result property="name" column="name" />
        <result property="mobile" column="mobile" />
        <result property="userId" column="user_id" />
        <result property="gender" column="gender" />
        <result property="birthday" column="birthday" />
        <result property="maritalStatus" column="marital_status" />
        <result property="email" column="email" />
        <result property="qq" column="qq" />
        <result property="hukou" column="hukou" />
        <result property="province" column="province" />
        <result property="city" column="city" />
        <result property="zone" column="zone" />
        <result property="workExperience" column="work_experience" />
        <result property="degree" column="degree" />
        <result property="source" column="source" />
        <result property="resumeName" column="resume_name" />
        <result property="introduction" column="introduction" />
        <result property="education" column="education" javaType="cn.lu.cuet.data.loader.model.Education"
                typeHandler="cn.lu.cuet.data.loader.mybatis.JsonTypeHandler" />
    </resultMap>

    <select id="findResumeById" parameterType="int" resultType="Resume" >
        SELECT id, create_time, update_time, deleted, name, mobile, user_id, gender, birthday, marital_status,
            email, qq, hukou, province, city, zone, work_experience, degree, source, resume_name, introduction,
            education
        FROM resume
        WHERE id = #{id}
    </select>

    <insert id="createResume" parameterType="Resume" >
        <selectKey resultType="java.lang.Long" order="AFTER" keyProperty="id" >
            SELECT currval('resume_id_seq') AS id
        </selectKey>
        INSERT INTO resume (id, create_time, update_time, deleted, name, mobile, user_id, gender, birthday,
            marital_status, email, qq, hukou, province, city, zone, work_experience, degree,
            source, resume_name, introduction, education)
        VALUES (nextval('resume_id_seq'), #{createTime}, #{updateTime}, #{deleted}, #{name}, #{mobile}, #{userId}, #{gender}, #{birthday},
            #{maritalStatus}, #{email}, #{qq}, #{hukou}, #{province}, #{city}, #{zone}, #{workExperience}, #{degree},
            #{source}, #{resumeName}, #{introduction}, (#{education})::json )
    </insert>
</mapper>